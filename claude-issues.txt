ðŸ”´ Fix These â€” Real Bugs or Security Issues

Path traversal vulnerability (server.js) â€” unvalidated file paths in /api/results/ endpoints.
Regex injection from user input (historyDiscovery.js) â€” unescaped siteSlug in RegExp constructor.
Target normalization mismatch (aggregateRules.js / diffRules.js) â€” inconsistent join separators make the array check in diffRules dead code.
Possible double diff computation (process-results.js) â€” diffRules mutates rules in place and may be called twice through the pipeline.
XSS via siteUrl in generated reports (auditHtml.js, execHtml.js) â€” user-supplied URL interpolated unescaped into <title> and <h1>.
XSS via o.page / p.url in components (reportComponents.js, execReportComponents.js) â€” crawled page URLs rendered unescaped into href and display text, with no javascript: validation.
XSS via run.displayUrl in history rendering (audit.js) â€” user-supplied URL inserted via li.innerHTML without escaping.
message field rendered unescaped into innerHTML (audit.js) â€” progress messages include stderr from Puppeteer, which could contain unexpected HTML.


ðŸŸ¡ Fix Soon â€” Reliability and Correctness Issues

Silent sub-sitemap failures (fetchUrls.js) â€” empty catch blocks drop entire sitemap sections silently.
Silent parse failures in history (historyDiscovery.js) â€” failed file reads return null with no warning, dropping chart data points.
pageCount defaults to 1 (historyDiscovery.js) â€” fabricated value skews per-page metrics.
Unhandled exception on missing urls-clean.txt (scripts/run-audit.js) â€” no try/catch on top-level file read.
CI raw file cleanup has no error handling (process-results.js) â€” fs.unlinkSync after successful audit can throw unhandled.
Stdout JSON parsing is fragile (server.js / process-results.js) â€” reverse line scan for JSON would break if any other log line is valid JSON. Use a sentinel prefix.
SSRF â€” no URL validation before fetch (fetchUrls.js / server.js) â€” private/loopback IP ranges not blocked.
Grade thresholds and benchmark baseline are magic numbers (execHtml.js, execReportComponents.js) â€” the grading ranges and the / 20 benchmark divisor have no named constants or documentation, and the thresholds displayed in Methodology must be kept in sync manually.
Duplicate chart logic (reportComponents.js, execReportComponents.js) â€” identical SVG chart generation duplicated across both files; a bug fix needs to be applied twice.
Undefined CSS variables silently failing (audit.css, exec-report.css) â€” --bg-info, --color-info-border, --color-info-text, --color-action-hover, --font-md in audit.css; --font-xs in exec-report.css. The rationale section in particular is likely rendering without its intended styles.
fullyResolvedRules silently dropped (auditHtml.js) â€” passed by process-results.js but not destructured in the function signature.


ðŸ”µ Code Quality and Maintainability

Debug logging left in production (diffRules.js) â€” fires on every new violation.
escapeHtml defined in three places (enrichRules.js, reportComponents.js, implicitly needed in execReportComponents.js) â€” should be a single shared utility. The version in reportComponents.js is the most complete (escapes quotes too).
weights object defined three times with different values (historyDiscovery.js, execHtml.js, process-results.js) â€” a change to the scoring model requires three edits.
IMPACT_ORDER and topN defined inside functions (aggregateRules.js) â€” should be module-level constants.
escape helper defined inside function (enrichRules.js) â€” no closure dependencies; should be module-level.
Stale JSDoc (enrichRules.js) â€” documents friendlyNames, implementation uses axeMetadata.
helpUrl not validated (enrichRules.js) â€” no check for valid HTTPS URL before inserting into HTML output.
Magic numbers without names (historyDiscovery.js, aggregateRules.js) â€” .slice(-10) and topN = 5.
Script detection by string matching (server.js) â€” scriptPath.includes('run-audit') is fragile.
Dead code in status endpoint (server.js) â€” try/catch that can never catch a server-side network error.
wcag-tags.json in wrong directory (process-results.js) â€” belongs in data/ with other reference files.
Priority score calculated twice with different weights (aggregateRules.js / process-results.js) â€” two "top 5" lists that could disagree.
Duplicate .rule__badge rule (audit.css) â€” defined twice with conflicting properties; second definition partially overrides first.
Duplicate .trend-wrapper rule (exec-report.css) â€” conflicting padding values.
Two /* Footer */ section comments (audit.css) â€” one should be /* Chart */.
Non-standard meta tag (index.html) â€” <meta name="text-scale"> has no effect in any browser.
Focus styles gated behind motion media query (audit.css) â€” users who prefer reduced motion get no visible focus indicator.
scroll-behavior: smooth outside motion query (audit.css) â€” affects users who prefer reduced motion.
Shared Puppeteer page in crawler (fetchUrls.js) â€” single page instance reused across all crawled URLs.
Settle time hardcoded at 1500ms (runAudit.js) â€” adds ~75 seconds to a 50-page audit with no way to configure it.
ImpactSummary unnecessary || 0 fallback (execReportComponents.js) â€” misleadingly suggests unexpected impact values are possible given the initialized counts object.


Overall Grades
Backend: B+
Sound architecture, principled design, good separation of concerns. Held back by accumulated sharp edges â€” the diff mutation issue, the inconsistent normalization, and the security items that should have been caught earlier. Clean up the ðŸ”´ items and it's an A-.
Frontend: B
The CSS token system and motion handling are genuinely strong. The component architecture in the report generators is clean. Held back by the XSS issues appearing in multiple places (a pattern, not an accident), the undefined CSS variables silently degrading the UI, and the duplicated chart logic. The audit.js polling and cancel logic is solid. Clean up the security items and undefined variables and it reaches B+.
Overall Project: B+
This is a well-conceived tool with real design thinking behind it. The history tracking and diff system are the standout features and they're implemented thoughtfully. The codebase has grown fast and accumulated the expected debt â€” nothing here is unfixable, and none of it undermines the core value of what the tool does. With a focused pass on the ðŸ”´ and ðŸŸ¡ items this would be a genuinely excellent piece of work.